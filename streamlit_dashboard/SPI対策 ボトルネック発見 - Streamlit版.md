# SPI対策 ボトルネック発見 - Streamlit版

企業レベルのデザインを備えた、SPI対策用のボトルネック発見ダッシュボードです。VSCode、Python、Streamlitで動作します。

## 📋 機能

- **企業・目標設定** - 志望企業名、目標正答率、時間設定を入力可能
- **学習データ入力** - 日付、科目、ジャンル、単元、解答時間、正誤、ミスの原因を記録
- **主要指標表示** - 現在の正答率、目標との差、時間超過率、総演習数をKPIカードで表示
- **分析グラフ** - 日別正答率トレンド、達成度ゲージ、優先単元Top5、誤答原因分析
- **科目別達成状況** - 各科目の正答率をプログレスバーで表示
- **データ管理** - CSV形式でのアップロード・ダウンロード対応

## 🚀 セットアップと実行

### 1. 必要なパッケージのインストール

```bash
pip install streamlit pandas numpy plotly
```

### 2. ダッシュボードの実行

```bash
streamlit run dashboard.py
```

ブラウザが自動的に開き、`http://localhost:8501` でダッシュボードが表示されます。

### 3. VSCodeでの実行方法

VSCodeのターミナルで以下を実行：

```bash
streamlit run dashboard.py
```

または、VSCode内のPython拡張機能を使用して直接実行できます。

## 📊 使い方

### 1. 企業・目標設定

サイドバーの「🏢 企業・目標設定」セクションで以下を入力：

- **志望企業名** - 対策対象の企業名（例：〇〇商社）
- **目標正答率** - SPI試験での目標正答率（0-100%）
- **時間設定** - 解答時間の基準（標準/厳しく/緩く）

### 2. 学習データ入力

サイドバーの「✏️ 学習データ入力」セクションで問題を追加：

1. 日付を選択
2. 科目 → ジャンル → 単元を順に選択
3. 解答時間、正誤、ミスの原因、学習時間を入力
4. 「➕ データを追加」ボタンをクリック

### 3. ファイル管理

#### 問題マスタCSVのアップロード

デフォルトの30問に加えて、独自の問題マスタをCSVでアップロード可能：

```csv
問題ID,科目,ジャンル,単元,目標解答時間(秒),目標正答率(%),難易度,出題頻度(重み)
N-A01,非言語,推論,集合の推論 (ベン図),120,85,高,5
```

#### 学習ログCSVのアップロード

過去の学習データをCSVでアップロード：

```csv
日付,問題ID,正誤,解答時間(秒),ミスの原因,学習投入時間(分)
2024-11-01,N-A01,〇,100,-,15
2024-11-01,N-A02,✕,120,時間不足,20
```

### 4. 分析期間の設定

サイドバーの「🔍 分析期間」で開始日と終了日を選択して、特定期間のデータを分析できます。

## 📈 ダッシュボード表示内容

### アクションカード
- 次週の重点単元を表示
- 正答率と改善方向を提示

### 主要指標（KPIカード）
- **現在の正答率** - 期間平均の正答率
- **目標との差** - 目標正答率との差分
- **時間超過率** - 目標時間を超過した割合
- **総演習数** - 累計問題数

### 分析グラフ
- **日別正答率トレンド** - 折れ線グラフで推移を表示
- **達成度ゲージ** - 目標に対する進捗をゲージで表示
- **優先単元Top5** - 改善が必要な単元を優先度順に表示
- **誤答原因分析** - ミスの原因を集計して表示

### 科目別達成状況
- 各科目の正答率をプログレスバーで表示
- 目標との差分を表示

## 💾 データの保存と共有

### CSVダウンロード

「📋 入力済みデータ一覧」セクションで、入力したデータをCSV形式でダウンロード可能です。

### データの永続化

Streamlitのセッション機能により、ブラウザを閉じるまでデータは保持されます。永続的に保存するには、CSVダウンロード機能を使用してください。

## 🎨 デザイン特徴

- **企業向けの洗練された配色** - プライマリ青とアクセントオレンジ
- **高品質なグラフ** - Plotlyを使用した対話的なグラフ
- **レスポンシブデザイン** - 様々な画面サイズに対応
- **直感的なUI** - サイドバーで設定、メインエリアで分析結果を表示

## 🔧 カスタマイズ

### カラーの変更

`dashboard.py`の先頭部分でカラー定義を変更：

```python
PRIMARY = "#3B82F6"  # 企業向けの青
ACCENT = "#F97316"   # オレンジ
SUCCESS = "#10B981"  # 緑
WARNING = "#F59E0B"  # 黄
DANGER = "#EF4444"   # 赤
NEUTRAL = "#6B7280"  # グレー
```

### 問題マスタの追加

`DEFAULT_MASTER_ROWS`に新しい問題を追加することで、デフォルト問題セットを拡張できます。

## 📝 トラブルシューティング

### Streamlitが起動しない

```bash
pip install --upgrade streamlit
```

### グラフが表示されない

```bash
pip install --upgrade plotly
```

### 日本語が文字化けする

フォント設定を確認し、必要に応じてシステムフォントをインストール。

## 📧 サポート

問題が発生した場合は、以下を確認してください：

1. Pythonバージョン: 3.8以上
2. 必要なパッケージがインストール済み
3. ファイルエンコーディング: UTF-8

## 📄 ライセンス

このプロジェクトは自由に使用・改変できます。
